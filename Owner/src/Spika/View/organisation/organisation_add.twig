{% extends "adminbase.twig" %}
{% block content %}

<!-- start: PAGE HEADER -->
<div class="row">
	<div class="col-sm-12">
		<!-- start: PAGE TITLE & BREADCRUMB -->
		<ol class="breadcrumb">
			<li>
				<i class="clip-home-3"></i>
				<a href="{{OWNER_ROOT_URL}}/dashboard">
					{{lang.general1}}
				</a>
			</li>
			<li>
				<a href="{{OWNER_ROOT_URL}}/organisation/">
				{{lang.organisation1}}
				</a>
			</li>
			</li>
			<li class="active">
				{{lang.organisation3}}
			</li>

		</ol>
		<div class="row page-header">
			<div class="col-md-6">
				<h1>{{lang.organisation4}}</h1>
			</div>
		</div>
		<!-- end: PAGE TITLE & BREADCRUMB -->
	</div>
</div>
<!-- end: PAGE HEADER -->

<!-- start: PAGE CONTENT -->

                    {% include "alert.twig" %}

                    <div class="row">
                        
                        <div class="col-md-12">
                        
                            <form role="form" class="form-horizontal form" method="post" action="{{OWNER_ROOT_URL}}/organisation/add" enctype="multipart/form-data">
                            
                                {% include 'organisation/organisation_form.twig' %}
                                
                            	<div class="row">
                            		<div class="col-md-12 right">
                            			<input type="submit" class="btn btn-primary" value="{{lang.general9}}" / >
                            		</div>
                            	</div>
                            	
                            </form>
                            
                        </div>
                    
                    </div>
                    		
{% endblock %}

{% block pageScript %}
    <script src="{{ROOT_URL}}/assets/plugins/jquery-validation/dist/jquery.validate.min.js"></script>
	<script src="{{ROOT_URL}}/assets/js/sp-validator.js"></script>
	<!-- end: JAVASCRIPTS REQUIRED FOR THIS PAGE ONLY -->
	<script>

        var runFormValidator = function () {
            var form = $('.form');
            var errorHandler = $('.errorHandler');
            form.validate({
                rules: {
                    name: {
                        minlength: 6,
                        required: true
                    },
                    email: {
	                    email: true,
                        required: true
                    },
                    admin_name: {
                        minlength: 6,
                        loginRegex: true,
                        required: true
                    },
                    admin_password: {
                        minlength: 6,
                        loginRegex: true,
                        required: true
                    },
                    max_users: {
                        number: true,
                        required: true
                    },
                    max_groups: {
                        number: true,
                        required: true
                    },
                    max_rooms: {
                        number: true,
                        required: true
                    },
                    disk_quota: {
                        number: true,
                        required: true
                    },

                },
                submitHandler: function (form) {
                    errorHandler.hide();
                    form.submit();
                },
                invalidHandler: function (event, validator) { //display error alert on form submit
                    errorHandler.show();
                }
            });
        };
        
		jQuery(document).ready(function() {
			SpValidator.initValidator();
			runFormValidator();
		});
		
	</script>
{% endblock %}
